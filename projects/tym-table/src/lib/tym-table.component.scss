/*!
 * tym-table.js
 * Copyright (c) 2021 shinichi tayama
 * Released under the MIT license.
 * see https://opensource.org/licenses/MIT
 */

:host {
  --fo-fa: Consolas, monaco, monospace;
  --fo-sz: 1rem;
  --bo-co: #888888;
  --hd-bg: #888888 linear-gradient(#888888, #666666);
  --hd-co: #ffffff;
  --hd-sa: 1px 1px 3px 0 #cccccc inset;
  --bd-co: #000000;
  --bd-sa: 1px 1px 3px 0 #cccccc inset;
  --bd-pa: .4em;
  --bd-hi: calc(var(--bd-pa) + var(--bd-pa) + 1.7em);
  --bd-wd: calc(var(--bd-pa) + var(--bd-pa) + 2.7em);
  --ev-co: #eeeeee;
  --od-co: #ffffff;
  --se-co: #ffeeee;
  --ho-co: #eeffee;
}

table {
  font-family: var(--fo-fa);
  font-size: var(--fo-sz);
  border-collapse: separate;
  border-spacing: 0;
  table-layout: fixed;
  width: 100%;

  thead {
    tr {
      user-select: none;

      th {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        z-index: 1;
        resize: none;
        color: var(--hd-co);
        border: solid var(--bo-co);
        border-width: 1px 1px 1px 0;
        box-shadow: var(--hd-sa);
        background: var(--hd-bg);
        padding: 0;

        &:first-child {
          z-index: 2;
          left: 0;
          resize: none;
          cursor: pointer;
          width: var(--bd-hi);
          border-left: 1px solid var(--bo-co);
        }

        &:last-child {
          width: auto;
          resize: none;
          opacity: .5;
        }

        div {
          min-width: var(--bd-wd);
          overflow: hidden;
          text-overflow: ellipsis;
          padding: var(--bd-pa) var(--bd-pa);
          resize: horizontal;
          box-sizing: border-box;
        }

        svg {
          position: absolute;
          cursor: pointer;
          top: 2px;
          right: 0;
          width: 11px;
          height: 11px;
          stroke: #000;
          stroke-linejoin: round;
        }
      }
    }
  }

  tbody {
    tr {
      opacity: .8;

      >* {
        color: var(--bd-co);
        border: solid var(--bo-co);
        border-width: 0 1px 1px 0;
        box-shadow: var(--bd-sa);
        padding: var(--bd-pa) var(--bd-pa);

        &:first-child {
          position: -webkit-sticky;
          position: sticky;
          left: 0;
          border-left: 1px solid var(--bo-co);
          padding: 0;
          cursor: pointer;
        }

        &:last-child {
          width: auto;
          resize: none;
          opacity: .5;
        }
      }

      &:nth-child(even)>* {
        background: var(--ev-co);
      }

      &:nth-child(odd)>* {
        background: var(--od-co);
      }

      &.selected>* {
        background-color: var(--se-co);
      }

      &:hover {
        opacity: 1;

        >* {
          background-color: var(--ho-co);
        }
      }
    }
  }

  th,
  td {
    height: var(--bd-hi);
    min-width: var(--bd-wd);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    box-sizing: border-box;
  }

  input[type=checkbox] {
    width: 1.2em;
    height: 1.2em;
    font-size: inherit;
    cursor: pointer;
  }

  .clickable {
    cursor: pointer;
  }
}
