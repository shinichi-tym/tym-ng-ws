/*!
 * tym-tree.js
 * Copyright (c) 2021 shinichi tayama
 * Released under the MIT license.
 * see https://opensource.org/licenses/MIT
 */

:host {
  --bs-sz: 16px;
  --bx-sz: calc(var(--bs-sz) + 4px);
  --fc-co: #cef;
  --ho-co: #eff;
  font-size: var(--bs-sz);
  padding: 0;
  margin: 0;
  display: block;
  overflow-y: auto;
  color: #000;
  background-color: #fff;
  font-family: system-ui;
  box-sizing: border-box;
  * {box-sizing: border-box;}
  *::before {
    box-sizing: border-box;
    font-size: var(--bs-sz);
  }
}

.d {
  overflow-x: hidden;
}

div {

  >span {
    display: block;
    line-height: var(--bx-sz);
    border: solid 1px transparent;
    user-select: none;

    padding: 2px;
    white-space: nowrap;

    &:focus-visible {
      outline: none;
    }
    &.opn{
      background: center center/.8em transparent no-repeat url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 9 9'><path d='M1 2 L4 6 L7 2' stroke='%23000000' fill='transparent'/></svg>");
    }  
    &.cls {
      background: center center/.8em transparent no-repeat url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 9 9'><path d='M2 1 L6 4 L2 7' stroke='%23aaaaaa' fill='transparent'/></svg>");
      +div {
        display: none;
      }
    }
    &.off {
      background: none;
    }
    &.lod{
      margin-left: 1em;
      background: center center/.8em transparent no-repeat url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 9 9'><circle cx='4' cy='4' r='3' stroke='%23000000' fill='transparent'><animate attributeName='r' from='0' to='3' dur='.5s' repeatCount='indefinite'/></circle></svg>");
    }  
    &:focus {
      background-color: var(--fc-co);
    }
    &.hov {
      position: absolute;
      background-color: var(--ho-co);
    }
  }
}
span {
  &.spc {
    width: var(--bx-sz);
    margin: 0 2px;
    text-align: center;
    display: inline-block;
    line-height: var(--bx-sz);
  }
  &.sp::before {
    content: '  ';
    font-family: monospace;
    margin-left: var(--bs-sz);
  }
}